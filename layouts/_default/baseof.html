<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ if .Title }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">

    <!-- Open Graph -->
    <meta property="og:title" content="{{ .Title | default .Site.Title }}">
    <meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    {{ with .Params.coverUrl }}<meta property="og:image" content="{{ . }}">{{ end }}

    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}">
    {{ block "head" . }}{{ end }}
</head>
<body>
    <nav class="main-nav">
        <div class="nav-container">
            <a href="{{ "/" | relURL }}" class="site-title">{{ .Site.Title }}</a>
            <div class="nav-links">
                {{ range .Site.Menus.main }}
                <a href="{{ .URL | relURL }}" class="{{ if $.IsMenuCurrent "main" . }}active{{ end }}">{{ .Name }}</a>
                {{ end }}
            </div>
        </div>
    </nav>

    <main class="content">
        {{ block "main" . }}{{ end }}
    </main>

    <!-- Persistent Audio Player -->
    <div id="player-bar" class="player-bar hidden">
        <div class="player-container">
            <div class="now-playing">
                <img id="player-cover" src="" alt="Album art" class="player-cover">
                <div class="player-info">
                    <span id="player-title" class="player-title">Not Playing</span>
                    <span id="player-artist" class="player-artist"></span>
                </div>
            </div>
            <div class="player-controls">
                <button id="prev-btn" class="control-btn" title="Previous">
                    <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                </button>
                <button id="play-btn" class="control-btn play-btn" title="Play">
                    <svg class="play-icon" viewBox="0 0 24 24" width="32" height="32"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
                    <svg class="pause-icon hidden" viewBox="0 0 24 24" width="32" height="32"><path fill="currentColor" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                </button>
                <button id="next-btn" class="control-btn" title="Next">
                    <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                </button>
            </div>
            <div class="player-progress">
                <span id="current-time">0:00</span>
                <input type="range" id="progress-bar" class="progress-bar" min="0" max="100" value="0">
                <span id="duration">0:00</span>
            </div>
            <div class="player-volume">
                <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
                <input type="range" id="volume-bar" class="volume-bar" min="0" max="100" value="80">
            </div>
        </div>
    </div>

    <audio id="audio-player" preload="metadata"></audio>

    <footer class="site-footer">
        <p>Built with the <a href="https://github.com/imcmurray/SunoPlaylistPlayer">Suno Playlist Player</a></p>
        <p class="stats">
            {{ $songs := (index .Site.Data "songs") | default dict }}
            {{ $playlists := (index .Site.Data "playlists") | default dict }}
            <span>{{ len $songs }} songs</span> &bull; <span>{{ len $playlists }} playlists</span>
        </p>
        {{ with .Site.Data.build }}
        <p class="build-info">
            <a href="https://github.com/imcmurray/suno-music-library/commit/{{ .commit }}" target="_blank" rel="noopener">{{ .shortCommit }}</a> &bull; {{ .buildTime }}
        </p>
        {{ end }}
    </footer>

    <script src="{{ "js/player.js" | relURL }}"></script>
    {{ block "scripts" . }}{{ end }}
</body>
</html>
