{{ define "main" }}
<div class="home">
    <header class="hero">
        <h1>{{ .Site.Title }}</h1>
        <p class="hero-subtitle">{{ .Site.Params.description }}</p>
    </header>

    <!-- Recent Playlists -->
    {{ $playlists := (index .Site.Data "playlists") | default dict }}
    {{ if $playlists }}
    <section class="section">
        <h2 class="section-title">Playlists</h2>
        <div class="playlist-grid">
            {{ range $id, $playlist := $playlists }}
            <a href="{{ printf "/playlists/%s/" $id | absURL }}" class="playlist-card">
                <div class="playlist-cover-wrap">
                    {{ if $playlist.coverUrl }}
                    <img src="{{ $playlist.coverUrl }}" alt="{{ $playlist.title }}" class="playlist-cover" loading="lazy">
                    {{ else }}
                    <div class="playlist-cover placeholder">
                        <svg viewBox="0 0 24 24" width="48" height="48"><path fill="currentColor" d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
                    </div>
                    {{ end }}
                    <div class="playlist-play-overlay">
                        <svg viewBox="0 0 24 24" width="48" height="48"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
                    </div>
                </div>
                <div class="playlist-info">
                    <h3 class="playlist-title">{{ $playlist.title }}</h3>
                    <p class="playlist-meta">
                        {{ with $playlist.creator }}{{ . }} &bull; {{ end }}
                        {{ len $playlist.songs }} songs
                    </p>
                </div>
            </a>
            {{ end }}
        </div>
    </section>
    {{ end }}

    <!-- Recent Songs -->
    {{ $songs := (index .Site.Data "songs") | default dict }}
    {{ if $songs }}
    <section class="section">
        <h2 class="section-title">All Songs</h2>
        <div class="song-list">
            {{ range $uuid, $song := $songs }}
            <div class="song-row" data-uuid="{{ $uuid }}" data-title="{{ $song.title }}" data-artist="{{ $song.artist }}" data-cover="{{ $song.coverUrl }}">
                <div class="song-cover-wrap">
                    {{ if $song.coverUrl }}
                    <img src="{{ $song.coverUrl }}" alt="{{ $song.title }}" class="song-cover" loading="lazy">
                    {{ else }}
                    <div class="song-cover placeholder"></div>
                    {{ end }}
                    <button class="song-play-btn" title="Play">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M8 5v14l11-7z"/></svg>
                    </button>
                </div>
                <div class="song-info">
                    <span class="song-title">{{ $song.title }}</span>
                    <span class="song-artist">{{ $song.artist }}</span>
                    {{ with $song.style }}<span class="song-style">{{ . }}</span>{{ end }}
                </div>
                <div class="song-actions">
                    <a href="https://suno.com/song/{{ $uuid }}" target="_blank" rel="noopener" class="external-link" title="View on Suno">
                        <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>
                    </a>
                </div>
            </div>
            {{ end }}
        </div>
    </section>
    {{ end }}

    {{ if and (not $playlists) (not $songs) }}
    <section class="empty-state">
        <svg viewBox="0 0 24 24" width="64" height="64"><path fill="currentColor" d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
        <h2>No music yet!</h2>
        <p>Use the <a href="https://github.com/imcmurray/SunoPlaylistPlayer">Suno Playlist Player</a> to discover music and sync it here.</p>
    </section>
    {{ end }}
</div>
{{ end }}
